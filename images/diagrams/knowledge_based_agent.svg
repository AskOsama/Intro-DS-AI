<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 500">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 12px; fill: #7f8c8d; font-style: italic; }
      .section-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #2c3e50; }
      .box-label { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #fff; }
      .box-sublabel { font-family: Arial, sans-serif; font-size: 10px; fill: rgba(255,255,255,0.9); }
      .inner-label { font-family: Arial, sans-serif; font-size: 11px; font-weight: bold; fill: #2c3e50; }
      .inner-text { font-family: Arial, sans-serif; font-size: 9px; fill: #7f8c8d; }
      .arrow-label { font-family: Arial, sans-serif; font-size: 11px; fill: #34495e; font-weight: bold; }
      .ext-label { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
    </style>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db"/>
    </marker>
    <marker id="arrow-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9b59b6"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="350" y="30" text-anchor="middle" class="title">Knowledge-Based Agent (AIMA Architecture)</text>
  <text x="350" y="50" text-anchor="middle" class="subtitle">Russell & Norvig's Knowledge-Based Agent Model</text>

  <!-- Main Agent Box -->
  <rect x="100" y="70" width="500" height="380" rx="15" fill="#f8f9fa" stroke="#2c3e50" stroke-width="3"/>
  <text x="350" y="95" text-anchor="middle" class="section-title">KNOWLEDGE-BASED AGENT</text>

  <!-- KNOWLEDGE BASE Container -->
  <rect x="130" y="110" width="440" height="170" rx="10" fill="#e8f4fd" stroke="#3498db" stroke-width="2"/>
  <text x="350" y="132" text-anchor="middle" class="section-title" style="fill: #3498db;">KNOWLEDGE BASE</text>

  <!-- Facts (ABox) -->
  <rect x="150" y="145" width="190" height="120" rx="8" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
  <text x="245" y="170" text-anchor="middle" class="box-label">FACTS (ABox)</text>
  <text x="245" y="188" text-anchor="middle" class="box-sublabel">Assertions about Individuals</text>
  <rect x="165" y="198" width="160" height="55" rx="4" fill="rgba(255,255,255,0.2)"/>
  <text x="175" y="215" style="font-family: monospace; font-size: 9px; fill: #fff;">parent(khalid, ahmed)</text>
  <text x="175" y="230" style="font-family: monospace; font-size: 9px; fill: #fff;">parent(ahmed, yusuf)</text>
  <text x="175" y="245" style="font-family: monospace; font-size: 9px; fill: #fff;">temperature(p1, 38.5)</text>

  <!-- Rules/Ontology (TBox) -->
  <rect x="360" y="145" width="190" height="120" rx="8" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
  <text x="455" y="170" text-anchor="middle" class="box-label">RULES (TBox)</text>
  <text x="455" y="188" text-anchor="middle" class="box-sublabel">Ontology / Axioms</text>
  <rect x="375" y="198" width="160" height="55" rx="4" fill="rgba(255,255,255,0.2)"/>
  <text x="385" y="215" style="font-family: monospace; font-size: 9px; fill: #fff;">grandparent(X,Z) :-</text>
  <text x="395" y="230" style="font-family: monospace; font-size: 9px; fill: #fff;">parent(X,Y),</text>
  <text x="395" y="245" style="font-family: monospace; font-size: 9px; fill: #fff;">parent(Y,Z).</text>

  <!-- INFERENCE ENGINE -->
  <rect x="200" y="300" width="300" height="60" rx="10" fill="#9b59b6" stroke="#7d3c98" stroke-width="2"/>
  <text x="350" y="330" text-anchor="middle" class="box-label">INFERENCE ENGINE</text>
  <text x="350" y="348" text-anchor="middle" class="box-sublabel">Forward Chaining | Backward Chaining | Resolution</text>

  <!-- Arrow from KB to Inference -->
  <line x1="350" y1="280" x2="350" y2="295" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrow-purple)"/>

  <!-- TELL arrow (left side - coming in) -->
  <rect x="20" y="185" width="60" height="35" rx="6" fill="#27ae60" stroke="#1e8449" stroke-width="2"/>
  <text x="50" y="207" text-anchor="middle" class="box-label" style="font-size: 12px;">TELL</text>
  <line x1="80" y1="202" x2="125" y2="202" stroke="#27ae60" stroke-width="2" marker-end="url(#arrow-green)"/>
  <text x="50" y="240" text-anchor="middle" class="ext-label" style="font-size: 10px;">Add new</text>
  <text x="50" y="253" text-anchor="middle" class="ext-label" style="font-size: 10px;">knowledge</text>

  <!-- ASK arrow (right side - coming in, answer going out) -->
  <rect x="620" y="185" width="60" height="35" rx="6" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
  <text x="650" y="207" text-anchor="middle" class="box-label" style="font-size: 12px;">ASK</text>
  <line x1="620" y1="202" x2="575" y2="202" stroke="#3498db" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <text x="650" y="240" text-anchor="middle" class="ext-label" style="font-size: 10px;">Query</text>
  <text x="650" y="253" text-anchor="middle" class="ext-label" style="font-size: 10px;">knowledge</text>

  <!-- Observations (bottom left) -->
  <rect x="120" y="380" width="120" height="50" rx="8" fill="#f39c12" stroke="#d68910" stroke-width="2"/>
  <text x="180" y="405" text-anchor="middle" class="box-label" style="font-size: 11px;">OBSERVATIONS</text>
  <text x="180" y="420" text-anchor="middle" class="box-sublabel">from world</text>
  <line x1="180" y1="380" x2="240" y2="360" stroke="#f39c12" stroke-width="2" marker-end="url(#arrow-purple)"/>

  <!-- Actions (bottom right) -->
  <rect x="460" y="380" width="120" height="50" rx="8" fill="#1abc9c" stroke="#16a085" stroke-width="2"/>
  <text x="520" y="405" text-anchor="middle" class="box-label" style="font-size: 11px;">ACTIONS</text>
  <text x="520" y="420" text-anchor="middle" class="box-sublabel">to world</text>
  <line x1="460" y1="360" x2="520" y2="380" stroke="#1abc9c" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- Bottom labels -->
  <text x="180" y="455" text-anchor="middle" class="ext-label" style="font-size: 10px; fill: #7f8c8d;">Sensors</text>
  <text x="520" y="455" text-anchor="middle" class="ext-label" style="font-size: 10px; fill: #7f8c8d;">Actuators</text>

</svg>
