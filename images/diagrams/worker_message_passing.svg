<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 280" width="650" height="280">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
    </marker>
    <marker id="bluearrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="325" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2c3e50" text-anchor="middle">Pattern 3: Message Passing / Dataflow (Flink)</text>

  <!-- Task boxes -->
  <rect x="60" y="70" width="130" height="60" rx="10" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
  <text x="125" y="97" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Task 1</text>
  <text x="125" y="117" font-family="Arial, sans-serif" font-size="11" fill="#e8f4fc" text-anchor="middle">(Worker 1)</text>

  <!-- Data stream arrow 1 -->
  <line x1="190" y1="100" x2="250" y2="100" stroke="#27ae60" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="220" y="85" font-family="Arial, sans-serif" font-size="10" fill="#27ae60" text-anchor="middle">data</text>
  <text x="220" y="125" font-family="Arial, sans-serif" font-size="10" fill="#27ae60" text-anchor="middle">stream</text>

  <rect x="260" y="70" width="130" height="60" rx="10" fill="#e67e22" stroke="#d35400" stroke-width="2"/>
  <text x="325" y="97" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Task 2</text>
  <text x="325" y="117" font-family="Arial, sans-serif" font-size="11" fill="#fef9e7" text-anchor="middle">(Worker 2)</text>

  <!-- Data stream arrow 2 -->
  <line x1="390" y1="100" x2="450" y2="100" stroke="#27ae60" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="420" y="85" font-family="Arial, sans-serif" font-size="10" fill="#27ae60" text-anchor="middle">data</text>
  <text x="420" y="125" font-family="Arial, sans-serif" font-size="10" fill="#27ae60" text-anchor="middle">stream</text>

  <rect x="460" y="70" width="130" height="60" rx="10" fill="#9b59b6" stroke="#7d3c98" stroke-width="2"/>
  <text x="525" y="97" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">Task 3</text>
  <text x="525" y="117" font-family="Arial, sans-serif" font-size="11" fill="#ebdef0" text-anchor="middle">(Worker 3)</text>

  <!-- Description box -->
  <rect x="60" y="165" width="530" height="95" rx="8" fill="#d4edda" stroke="#27ae60" stroke-width="1"/>
  <text x="325" y="195" font-family="Arial, sans-serif" font-size="14" fill="#2c3e50" text-anchor="middle" font-weight="bold">How it works:</text>
  <text x="325" y="220" font-family="Arial, sans-serif" font-size="12" fill="#333" text-anchor="middle">Data flows continuously through a pipeline of operators.</text>
  <text x="325" y="245" font-family="Arial, sans-serif" font-size="12" fill="#333" text-anchor="middle">No explicit "futures" - data streams between tasks.</text>

  <!-- Stream visualization -->
  <circle cx="145" y="175" r="4" fill="#27ae60"/>
  <circle cx="155" cy="175" r="4" fill="#27ae60"/>
  <circle cx="165" cy="175" r="4" fill="#27ae60"/>
  <text x="185" y="180" font-family="Arial, sans-serif" font-size="12" fill="#27ae60">â†’</text>
  <circle cx="205" cy="175" r="4" fill="#27ae60"/>
  <circle cx="215" cy="175" r="4" fill="#27ae60"/>
  <circle cx="225" cy="175" r="4" fill="#27ae60"/>
</svg>