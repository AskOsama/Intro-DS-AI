<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 450">
  <defs>
    <style>
      .title { font-family: Cairo, Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .step-number { font-family: Cairo, Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #fff; }
      .step-title { font-family: Cairo, Arial, sans-serif; font-size: 12px; font-weight: bold; fill: #2c3e50; }
      .step-text { font-family: Cairo, Arial, sans-serif; font-size: 11px; fill: #34495e; }
      .code-text { font-family: monospace; font-size: 11px; fill: #2c3e50; direction: ltr; }
      .highlight { font-family: monospace; font-size: 11px; fill: #e74c3c; font-weight: bold; direction: ltr; }
      .result { font-family: Cairo, Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #27ae60; }
      .subst { font-family: monospace; font-size: 10px; fill: #9b59b6; direction: ltr; }
    </style>
    <marker id="arrow-down" markerWidth="10" markerHeight="7" refX="5" refY="7" orient="auto">
      <polygon points="0 0, 10 0, 5 7" fill="#3498db"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="350" y="30" text-anchor="middle" class="title">عملية الاستدلال: كيف يجيب النظام على "grandparent(khalid, yusuf)?"</text>

  <!-- Query Box -->
  <rect x="200" y="50" width="300" height="40" rx="8" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
  <text x="350" y="75" text-anchor="middle" class="step-number" style="font-size: 13px;">?- grandparent(khalid, yusuf) :الاستعلام</text>

  <!-- Arrow -->
  <line x1="350" y1="90" x2="350" y2="115" stroke="#3498db" stroke-width="2" marker-end="url(#arrow-down)"/>

  <!-- Step 1 -->
  <rect x="50" y="120" width="600" height="55" rx="8" fill="#f8f9fa" stroke="#3498db" stroke-width="2"/>
  <circle cx="620" cy="147" r="18" fill="#3498db"/>
  <text x="620" y="153" text-anchor="middle" class="step-number">١</text>
  <text x="585" y="140" text-anchor="end" class="step-title">مطابقة الاستعلام مع رأس القاعدة</text>
  <text x="585" y="158" text-anchor="end" class="code-text">grandparent(khalid, yusuf) matches grandparent(X, Z)</text>
  <text x="250" y="165" text-anchor="end" class="subst">X = khalid, Z = yusuf :الاستبدال</text>

  <!-- Arrow -->
  <line x1="350" y1="175" x2="350" y2="195" stroke="#3498db" stroke-width="2" marker-end="url(#arrow-down)"/>

  <!-- Step 2 -->
  <rect x="50" y="200" width="600" height="55" rx="8" fill="#f8f9fa" stroke="#e74c3c" stroke-width="2"/>
  <circle cx="620" cy="227" r="18" fill="#e74c3c"/>
  <text x="620" y="233" text-anchor="middle" class="step-number">٢</text>
  <text x="585" y="220" text-anchor="end" class="step-title">إثبات جسم القاعدة بالاستبدال</text>
  <text x="585" y="238" text-anchor="end" class="code-text">parent(khalid, Y) AND parent(Y, yusuf) :يجب إثبات</text>

  <!-- Arrow -->
  <line x1="350" y1="255" x2="350" y2="275" stroke="#3498db" stroke-width="2" marker-end="url(#arrow-down)"/>

  <!-- Step 3 -->
  <rect x="50" y="280" width="600" height="55" rx="8" fill="#f8f9fa" stroke="#f39c12" stroke-width="2"/>
  <circle cx="620" cy="307" r="18" fill="#f39c12"/>
  <text x="620" y="313" text-anchor="middle" class="step-number">٣</text>
  <text x="585" y="300" text-anchor="end" class="step-title">parent(khalid, Y) إيجاد Y بحيث تكون صحيحة</text>
  <text x="585" y="318" text-anchor="end" class="step-text">البحث: تم إيجاد الحقيقة </text>
  <text x="345" y="318" class="highlight">parent(khalid, ahmed)</text>
  <text x="150" y="318" class="subst">Y = ahmed</text>

  <!-- Arrow -->
  <line x1="350" y1="335" x2="350" y2="355" stroke="#3498db" stroke-width="2" marker-end="url(#arrow-down)"/>

  <!-- Step 4 -->
  <rect x="50" y="360" width="600" height="55" rx="8" fill="#f8f9fa" stroke="#27ae60" stroke-width="2"/>
  <circle cx="620" cy="387" r="18" fill="#27ae60"/>
  <text x="620" y="393" text-anchor="middle" class="step-number">٤</text>
  <text x="585" y="380" text-anchor="end" class="step-title">parent(ahmed, yusuf) التحقق إذا كانت صحيحة</text>
  <text x="585" y="398" text-anchor="end" class="step-text">البحث: تم إيجاد الحقيقة </text>
  <text x="345" y="398" class="highlight">parent(ahmed, yusuf)</text>
  <text x="180" y="398" class="result">نعم!</text>

  <!-- Final Result -->
  <rect x="250" y="425" width="200" height="30" rx="6" fill="#27ae60" stroke="#1e8449" stroke-width="2"/>
  <text x="350" y="445" text-anchor="middle" class="step-number" style="font-size: 12px;">النتيجة: صحيح (TRUE)</text>

</svg>
